echo "make sure to execute from the root of git repository"
set -e
go fmt ./...
go test ./...
hasEverything=$(git diff)
if [[ -z $hasEverything ]]; then exit 0; else echo "git status needs to return an empty string. Stash your changes or commit them."; exit 1; fi
